(self.webpackChunkvacapi=self.webpackChunkvacapi||[]).push([[251],{4172:(wt,rt,g)=>{"use strict";g.r(rt),g.d(rt,{VacapiComponentsModule:()=>V}),g(7271);var M=g(1896),J=g(1474),U=g(6814),C=g(151),gt=g(4643),f=g(6223),A=g(5195),v=g(2296),_=g(617),O=g(9347),e=g(9212);let Y=(()=>{class l{constructor(a,s){this.dialogRef=a,this.data=s}onNoClick(){this.dialogRef.close(!1)}onYesClick(){this.dialogRef.close(!0)}static#t=this.\u0275fac=function(s){return new(s||l)(e.Y36(O.so),e.Y36(O.WI))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-confirmation-modal"]],decls:14,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","",1,"button-group"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(s,c){1&s&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"p"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return c.onNoClick()}),e.TgZ(7,"mat-icon"),e._uU(8,"close"),e.qZA(),e._uU(9," Cancelar"),e.qZA(),e.TgZ(10,"button",4),e.NdJ("click",function(){return c.onYesClick()}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA(),e._uU(13," Eliminar"),e.qZA()()),2&s&&(e.xp6(1),e.Oqu(c.data.title),e.xp6(3),e.Oqu(c.data.message))},dependencies:[O.uh,O.H8,O.xY,v.lW,_.Hw],styles:["h1[_ngcontent-%COMP%]{color:#46a66d;font-size:1.5rem}p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1rem}button.mat-button[_ngcontent-%COMP%]{font-size:1rem;padding:10px 20px}button[color=primary][_ngcontent-%COMP%]:hover, button[color=warn][_ngcontent-%COMP%]:hover{background-color:darken(#46a66d,10%)}.mat-dialog-container[_ngcontent-%COMP%]{box-shadow:0 12px 24px #0003;border-radius:8px;overflow:hidden}.mat-dialog-title[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e0e0e0}.mat-dialog-content[_ngcontent-%COMP%]{padding:20px}.mat-dialog-actions[_ngcontent-%COMP%]{padding:20px;justify-content:flex-end}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:auto;padding:15px}button[_ngcontent-%COMP%]{text-transform:uppercase}button[color=primary][_ngcontent-%COMP%]{background-color:#46a66d;color:#fff}button[color=warn][_ngcontent-%COMP%]{background-color:#f4ba6a;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:darken(#46a66d,10%)}"]})}return l})();const m={apiUrl:"https://rmg83zs1-3000.use2.devtunnels.ms/dev",headers:new J.WM({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("VCP-token")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2NTY2NDA5Nzg2ZWQ0OTE5YzEyMjYzYTUiLCJpYXQiOjE3MDEyMDAwMjMsImV4cCI6MTcwMzc5MjAyM30.a8RbNqfxJMNJaVIJ64C0WaTcJ_sHKD4p8jVICVG3fOQ"}`,"Cache-Control":"no-cache"}),getCompanyId:function(){return localStorage.getItem("VCP-Company-ID")||"6566409686ed4919c122639e"},getRanchId:function(){return localStorage.getItem("VCP-Ranch-ID")||"6566409786ed4919c12263a3"}};var w=g(4716),I=g(5865);let at=(()=>{class l{constructor(a,s){this.http=a,this.spinnerService=s,this.ranchEmitter=new e.vpe,this.apiUrl=m.apiUrl}getRanches(){this.spinnerService.showSpinner();const a=`${this.apiUrl}/company/${m.getCompanyId()}/ranches`;return this.http.get(a,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}addRanch(a){this.spinnerService.showSpinner();const s=`${this.apiUrl}/company/${m.getCompanyId()}/ranches`;return this.http.post(s,a,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}updateRanch(a){this.spinnerService.showSpinner();const s=`${this.apiUrl}/company/${m.getCompanyId()}/ranches/${a._id}`;return this.http.put(s,a,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}deleteRanch(a){this.spinnerService.showSpinner();const s=`${this.apiUrl}/company/${m.getCompanyId()}/ranches/${a}`;return this.http.delete(s,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}static#t=this.\u0275fac=function(s){return new(s||l)(e.LFG(J.eN),e.LFG(I.V))};static#e=this.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var ot=g(2939),y=g(9157),X=g(2032);let Q=(()=>{class l{constructor(a,s,c,p){this.ranchService=a,this.dialogRef=s,this.data=c,this._snackBar=p,this.companyId="",this.ranch={_id:"",name:"",phone:"",city:"",urlImg:"",size:0,status:"active"},this.isEditing=!1,this.formNewRanch=new f.cw({name:new f.NI("",[f.kI.required]),city:new f.NI("",[f.kI.required,f.kI.minLength(3)]),size:new f.NI("",[f.kI.required]),phone:new f.NI(""),urlImg:new f.NI("")}),c?.ranch&&(this.isEditing=!0,this.formNewRanch.patchValue(c.ranch),this.ranch=c.ranch),this.companyId=c.companyId}ngOnInit(){}openMapDialog(){}handleFileInput(a){}saveNewRanch(){this.ranch&&(this.ranch._id?this.ranchService.updateRanch(this.ranch):this.ranchService.addRanch(this.ranch)).subscribe(s=>{console.log("Nueva finca guardada:",s),this.dialogRef.close(),this.ranchService.ranchEmitter.emit()},s=>{console.error("Error fetching ranches:",s),this._snackBar.open("Error al guardar la finca","Cerrar")})}closeModal(){this.dialogRef.close()}static#t=this.\u0275fac=function(s){return new(s||l)(e.Y36(at),e.Y36(O.so),e.Y36(O.WI),e.Y36(ot.ux))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-new-edit-ranch"]],decls:30,vars:8,consts:[[1,"form",3,"formGroup","ngSubmit"],["form","ngForm"],["mat-dialog-title",""],["mat-dialog-content",""],["formControlName","name","matInput","",3,"ngModel","ngModelChange"],["matInput","","formControlName","city",3,"ngModel","ngModelChange"],["matInput","","type","number","formControlName","size",3,"ngModel","ngModelChange"],["matInput","","formControlName","phone",3,"ngModel","ngModelChange"],["formControlName","urlImg","matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(s,c){1&s&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return c.saveNewRanch()}),e.TgZ(2,"h1",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"mat-form-field")(6,"mat-label"),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"input",4),e.NdJ("ngModelChange",function(u){return c.ranch.name=u}),e.qZA()(),e.TgZ(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Ciudad o Municipio"),e.qZA(),e.TgZ(12,"input",5),e.NdJ("ngModelChange",function(u){return c.ranch.city=u}),e.qZA()(),e.TgZ(13,"mat-form-field")(14,"mat-label"),e._uU(15,"Tama\xf1o (hectareas)"),e.qZA(),e.TgZ(16,"input",6),e.NdJ("ngModelChange",function(u){return c.ranch.size=u}),e.qZA()(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19,"N\xfamero de Contacto"),e.qZA(),e.TgZ(20,"input",7),e.NdJ("ngModelChange",function(u){return c.ranch.phone=u}),e.qZA()(),e.TgZ(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Url Imagen"),e.qZA(),e.TgZ(24,"input",8),e.NdJ("ngModelChange",function(u){return c.ranch.urlImg=u}),e.qZA()()(),e.TgZ(25,"div",9)(26,"button",10),e._uU(27,"Guardar"),e.qZA(),e.TgZ(28,"button",11),e.NdJ("click",function(){return c.closeModal()}),e._uU(29,"Cerrar"),e.qZA()()()),2&s&&(e.Q6J("formGroup",c.formNewRanch),e.xp6(3),e.Oqu(c.isEditing?"Editar Finca":"Nueva Finca"),e.xp6(5),e.Q6J("ngModel",c.ranch.name),e.xp6(4),e.Q6J("ngModel",c.ranch.city),e.xp6(4),e.Q6J("ngModel",c.ranch.size),e.xp6(4),e.Q6J("ngModel",c.ranch.phone),e.xp6(4),e.Q6J("ngModel",c.ranch.urlImg),e.xp6(2),e.Q6J("disabled",c.formNewRanch.invalid))},dependencies:[v.lW,O.uh,O.H8,O.xY,y.KE,y.hX,X.Nt,f._Y,f.Fj,f.wV,f.JJ,f.JL,f.sg,f.u],styles:[".form-container[_ngcontent-%COMP%]{width:80%;max-width:400px;margin:auto;padding:20px;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:8px;overflow-y:auto;max-height:80vh;position:relative}.header[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;z-index:1;display:flex;justify-content:space-between;padding-bottom:10px;margin-bottom:10px;height:60px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-title[_ngcontent-%COMP%]{text-align:center}.close-button[_ngcontent-%COMP%]{margin-left:auto}.form-field[_ngcontent-%COMP%]{margin-bottom:20px}.location-info[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 600px){.form-container[_ngcontent-%COMP%]{width:100%;max-width:none;height:100%}}button[_ngcontent-%COMP%]{text-transform:uppercase}button[color=primary][_ngcontent-%COMP%]{background-color:#46a66d;color:#fff}button[color=warn][_ngcontent-%COMP%]{background-color:#f4ba6a;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:darken(#46a66d,10%)}"]})}return l})();function vt(l,S){if(1&l){const a=e.EpF();e.TgZ(0,"mat-card",2),e._UZ(1,"img",3),e.TgZ(2,"div",4)(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"div",5)(6,"p")(7,"strong"),e._uU(8,"Cantidad de Hect\xe1reas:"),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p")(11,"strong"),e._uU(12,"Ciudad o Municipio:"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"p")(15,"strong"),e._uU(16,"Localizaci\xf3n en Mapa:"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"p")(19,"strong"),e._uU(20,"Tel\xe9fono:"),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"p")(23,"strong"),e._uU(24,"Estado:"),e.qZA(),e._uU(25),e.qZA()(),e.TgZ(26,"p"),e._uU(27),e.ALo(28,"date"),e.qZA(),e.TgZ(29,"div",6)(30,"button",7),e.NdJ("click",function(){const p=e.CHM(a).$implicit,u=e.oxw();return e.KtG(u.openNewRanchDialog(p))}),e.TgZ(31,"mat-icon"),e._uU(32,"edit"),e.qZA(),e._uU(33," Editar"),e.qZA(),e.TgZ(34,"button",8),e.NdJ("click",function(){const p=e.CHM(a).$implicit,u=e.oxw();return e.KtG(u.openConfirmationDialog(p._id))}),e.TgZ(35,"mat-icon"),e._uU(36,"delete"),e.qZA(),e._uU(37," Eliminar"),e.qZA()()()()}if(2&l){const a=S.$implicit;e.xp6(1),e.s9C("alt",a.name),e.Q6J("src",a.urlImg,e.LSH),e.xp6(3),e.Oqu(a.name),e.xp6(5),e.hij(" ",a.size,""),e.xp6(4),e.hij(" ",a.city,""),e.xp6(4),e.hij(" ",a.mapLocation,""),e.xp6(4),e.hij(" ",a.phone,""),e.xp6(4),e.hij(" ",a.status,""),e.xp6(2),e.hij("Fecha de Creaci\xf3n: ",e.lcZ(28,9,a.createdAt),"")}}let B=(()=>{class l{constructor(a,s,c){this.ranchService=a,this.dialog=s,this._snackBar=c,this.ranches=[]}ngOnInit(){this.loadRanches(),this.ranchService.ranchEmitter.subscribe(()=>{this.loadRanches()})}loadRanches(){this.ranchService.getRanches().subscribe(a=>{this.ranches=a},a=>{console.error("Error fetching ranches:",a),this._snackBar.open("Error al cargar las fincas","Cerrar")})}openNewRanchDialog(a){this.dialog.open(Q,{width:"600px",data:{ranch:a}}).afterClosed().subscribe(c=>{console.log("Di\xe1logo de nueva finca cerrado"),console.log(c)})}openConfirmationDialog(a){this.dialog.open(Y,{width:"400px",data:{title:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que quieres eliminar esta finca?"}}).afterClosed().subscribe(c=>{c&&this.deleteRanch(a)})}deleteRanch(a){console.log(`Eliminando la finca con ID: ${a}`),this.ranchService.deleteRanch(a).subscribe(s=>{console.log(`Finca con ID: ${a}`),this.ranchService.ranchEmitter.emit()},s=>{console.error("Error fetching ranches:",s),this._snackBar.open("Error al cargar las fincas","Cerrar")})}static#t=this.\u0275fac=function(s){return new(s||l)(e.Y36(at),e.Y36(O.uw),e.Y36(ot.ux))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-ranch-list"]],standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[[1,"ranch-list-container"],["class","ranch-card",4,"ngFor","ngForOf"],[1,"ranch-card"],[1,"ranch-image",3,"src","alt"],[1,"card-content"],[1,"info-row"],[1,"button-group"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(s,c){1&s&&(e.TgZ(0,"div",0),e.YNc(1,vt,38,11,"mat-card",1),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngForOf",c.ranches))},dependencies:[U.ez,U.sg,U.uU,v.ot,v.lW,A.QW,A.a8,_.Ps,_.Hw],styles:[".header-card[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0}.ranch-list-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0 -10px}.ranch-card[_ngcontent-%COMP%]{width:calc(33.33% - 20px);margin:10px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease-in-out;display:flex;flex-direction:column}.ranch-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-content[_ngcontent-%COMP%]{padding:15px;display:flex;flex-direction:column}.ranch-image[_ngcontent-%COMP%]{height:150px;width:100%;object-fit:cover;border-radius:8px 8px 0 0}.info-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:auto;padding:15px}button[_ngcontent-%COMP%]{text-transform:uppercase}button[color=primary][_ngcontent-%COMP%]{background-color:#46a66d;color:#fff}button[color=warn][_ngcontent-%COMP%]{background-color:#f4ba6a;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:darken(#46a66d,10%)}@media screen and (max-width: 600px){.ranch-card[_ngcontent-%COMP%]{width:calc(100% - 20px)}}"]})}return l})();var K=g(6007);let st=(()=>{class l{constructor(a){this.dialog=a,this.ranches=[]}ngOnInit(){}openNewRanchDialog(){this.dialog.open(Q,{width:"600px"}).afterClosed().subscribe(s=>{console.log("Di\xe1logo de nueva finca cerrado"),console.log(s)})}static#t=this.\u0275fac=function(s){return new(s||l)(e.Y36(O.uw))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-ranch"]],standalone:!0,features:[e.jDz],decls:11,vars:0,consts:[[1,"header-card"],[1,"header-content"],["mat-raised-button","","color","primary",3,"click"]],template:function(s,c){1&s&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"div",1)(4,"mat-card-title"),e._uU(5,"Fincas"),e.qZA(),e.TgZ(6,"button",2),e.NdJ("click",function(){return c.openNewRanchDialog()}),e._uU(7,"Crear Nueva "),e.TgZ(8,"mat-icon"),e._uU(9,"add"),e.qZA()()()()()(),e._UZ(10,"app-ranch-list"))},dependencies:[U.ez,v.ot,v.lW,A.QW,A.a8,A.dn,A.n5,_.Ps,_.Hw,K.Cv,B],styles:[".header-card[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]{text-transform:uppercase}button[color=primary][_ngcontent-%COMP%]{background-color:#46a66d;color:#fff}button[color=warn][_ngcontent-%COMP%]{background-color:#f4ba6a;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:darken(#46a66d,10%)}@media screen and (max-width: 600px){.ranch-card[_ngcontent-%COMP%]{width:calc(100% - 20px)}}"]})}return l})(),k=(()=>{class l{constructor(){this.reload=new e.vpe}reloadAnimals(){this.reload.emit()}static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-animal-header"]],outputs:{reload:"reload"},standalone:!0,features:[e.jDz],decls:27,vars:0,consts:[[1,"header-card"],[1,"header-content"],[1,"title-container"],[1,"age-group"],[1,"age-box","toros"],[1,"age-box","vacas"],[1,"age-box","terneros"],[1,"age-box","novillos"],[1,"button-group"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary"]],template:function(s,c){1&s&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"div",1)(4,"div",2)(5,"mat-card-title"),e._uU(6,"Animales"),e.qZA(),e.TgZ(7,"div",3)(8,"div",4),e._uU(9,"2"),e.qZA(),e.TgZ(10,"div",5),e._uU(11,"500"),e.qZA(),e.TgZ(12,"div",6),e._uU(13,"10"),e.qZA(),e.TgZ(14,"div",7),e._uU(15,"15"),e.qZA()()(),e.TgZ(16,"div",8)(17,"button",9),e.NdJ("click",function(){return c.reloadAnimals()}),e.TgZ(18,"mat-icon"),e._uU(19,"refresh"),e.qZA(),e.TgZ(20,"span"),e._uU(21,"Recargar"),e.qZA()(),e.TgZ(22,"button",10)(23,"mat-icon"),e._uU(24,"add"),e.qZA(),e.TgZ(25,"span"),e._uU(26,"Crear Nuevo"),e.qZA()()()()()()())},dependencies:[A.QW,A.a8,A.dn,A.n5,_.Ps,_.Hw,v.ot,v.lW],styles:[".header-card[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]{text-transform:uppercase}button[color=primary][_ngcontent-%COMP%]{background-color:#46a66d;color:#fff}button[color=warn][_ngcontent-%COMP%]{background-color:#f4ba6a;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:darken(#46a66d,10%)}.button-group[_ngcontent-%COMP%]{display:flex}.animal-count[_ngcontent-%COMP%]{font-size:.8em;margin:0}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}@media (max-width: 600px){.header-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.age-group[_ngcontent-%COMP%]{display:none;flex-wrap:wrap;justify-content:space-between}.age-box[_ngcontent-%COMP%]{width:20%;padding:5px;text-align:center;color:#fff;font-size:.9em;line-height:1.5;display:flex;justify-content:center;align-items:center;border:1px solid #fff;border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.toros[_ngcontent-%COMP%]{background-color:#2f704a}.vacas[_ngcontent-%COMP%]{background-color:#ef9923}.novillos[_ngcontent-%COMP%]{background-color:#46a66d}.novillas[_ngcontent-%COMP%]{background-color:#f4ba6a}.terneros[_ngcontent-%COMP%]{background-color:#74c495}.terneras[_ngcontent-%COMP%]{background-color:#f9dbb1}@media screen and (max-width: 600px){.age-group[_ngcontent-%COMP%]{display:flex}}"]})}return l})();var W=g(8525),H=g(3680);let tt=(()=>{class l{constructor(){this.filterAnimals=new e.vpe,this.filterForm=new f.cw({codeOrName:new f.NI(""),gender:new f.NI(""),batch:new f.NI(""),breed:new f.NI(""),age:new f.NI(""),owner:new f.NI("")})}onSubmit(){this.filterAnimals.emit(this.filterForm.value)}static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-animal-filter-bar"]],outputs:{filterAnimals:"filterAnimals"},standalone:!0,features:[e.jDz],decls:24,vars:1,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","codeOrName","placeholder","C\xf3digo o nombre"],["formControlName","gender"],["value",""],["value","male"],["value","female"],["matInput","","formControlName","batch","placeholder","Lote"],[1,"desktop-only"],["matInput","","formControlName","breed","placeholder","Raza"],["matInput","","formControlName","age","placeholder","Edad"],["matInput","","formControlName","owner","placeholder","Propietario"],["mat-raised-button","","type","submit",1,"desktop-only"],["mat-icon-button","",1,"mobile-only"]],template:function(s,c){1&s&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return c.onSubmit()}),e.TgZ(1,"mat-form-field"),e._UZ(2,"input",1),e.qZA(),e.TgZ(3,"mat-form-field")(4,"mat-select",2)(5,"mat-option",3),e._uU(6,"G\xe9nero"),e.qZA(),e.TgZ(7,"mat-option",4),e._uU(8,"Macho"),e.qZA(),e.TgZ(9,"mat-option",5),e._uU(10,"Hembra"),e.qZA()()(),e.TgZ(11,"mat-form-field"),e._UZ(12,"input",6),e.qZA(),e.TgZ(13,"mat-form-field",7),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"mat-form-field",7),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"mat-form-field",7),e._UZ(18,"input",10),e.qZA(),e.TgZ(19,"button",11),e._uU(20,"Filtrar"),e.qZA(),e.TgZ(21,"button",12)(22,"mat-icon"),e._uU(23,"search"),e.qZA()()()),2&s&&e.Q6J("formGroup",c.filterForm)},dependencies:[f.UX,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,X.c,X.Nt,y.KE,W.LD,W.gD,H.ey,v.ot,v.lW,v.RK,_.Ps,_.Hw],styles:["form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}mat-form-field[_ngcontent-%COMP%]{flex:1;margin-right:10px}button[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 600px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:block}}@media (min-width: 601px){.mobile-only[_ngcontent-%COMP%]{display:none}}"]})}return l})(),_t=(()=>{class l{constructor(a,s){this.http=a,this.spinnerService=s,this.ranchEmitter=new e.vpe,this.apiUrl=m.apiUrl}getAnimals(){this.spinnerService.showSpinner();const a=`${this.apiUrl}/company/${m.getCompanyId()}/ranch/${m.getRanchId()}/animals`;return this.http.get(a,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}addAnimal(a){this.spinnerService.showSpinner();const s=`${this.apiUrl}/company/${m.getCompanyId()}/ranch/${m.getRanchId()}/animals`;return this.http.post(s,a,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}updateAnimal(a){this.spinnerService.showSpinner();const s=`${this.apiUrl}/company/${m.getCompanyId()}/ranch/${m.getRanchId()}/animals/${a._id}`;return this.http.put(s,a,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}deleteAnimal(a){this.spinnerService.showSpinner();const s=`${this.apiUrl}/company/${m.getCompanyId()}/ranch/${m.getRanchId()}/animals/${a}`;return this.http.delete(s,{headers:m.headers}).pipe((0,w.x)(()=>this.spinnerService.hideSpinner()))}static#t=this.\u0275fac=function(s){return new(s||l)(e.LFG(J.eN),e.LFG(I.V))};static#e=this.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();function et(l,S){if(1&l&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Lote:"),e.qZA(),e._uU(3),e.qZA()),2&l){const a=e.oxw().$implicit;e.xp6(3),e.hij(" ",a.batch,"")}}function Zt(l,S){if(1&l&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Ult. Parto:"),e.qZA(),e._uU(3),e.ALo(4,"date"),e.qZA()),2&l){const a=e.oxw().$implicit;e.xp6(3),e.AsE(" ",e.lcZ(4,2,a.lastBirthOrAbortion.date)," ","abortion"==a.lastBirthOrAbortion.eventType?"(Aborto)":"","")}}function Ut(l,S){if(1&l&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Ult. Peso:"),e.qZA(),e._uU(3),e.qZA()),2&l){const a=e.oxw().$implicit;e.xp6(3),e.hij(" ",null==a.lastWeight?null:a.lastWeight.weight," Kgs")}}function Tt(l,S){if(1&l&&(e.TgZ(0,"mat-card",3)(1,"div",4),e._uU(2),e.qZA(),e._UZ(3,"img",5),e.TgZ(4,"div",6)(5,"div",7),e.YNc(6,et,4,1,"p",8),e.TgZ(7,"p")(8,"strong"),e._uU(9,"Edad:"),e.qZA(),e._uU(10),e.ALo(11,"date"),e.qZA(),e.YNc(12,Zt,5,4,"p",8)(13,Ut,4,1,"p",8),e.qZA()()()),2&l){const a=S.$implicit,s=e.oxw();e.xp6(1),e.Udp("background",a.colorHeader)("color",s.isLightColor(a.colorHeader||"")?"black":"white"),e.xp6(1),e.hij(" ",a.name||" "+a.code," "),e.xp6(1),e.s9C("alt",a.code),e.Q6J("src",a.lastImage,e.LSH),e.xp6(3),e.Q6J("ngIf",a.batch),e.xp6(4),e.AsE(" ",a.timeDifference," (",e.lcZ(11,12,a.birthDate),")"),e.xp6(2),e.Q6J("ngIf",a.lastBirthOrAbortion),e.xp6(1),e.Q6J("ngIf",null==a.lastWeight?null:a.lastWeight.weight)}}let St=(()=>{class l{constructor(a,s){this.animalService=a,this._snackBar=s,this.animals=[],this.filteredAnimals=[]}ngOnInit(){this.loadAnimals(),this.animalService.ranchEmitter.subscribe(()=>{this.loadAnimals()})}reloadAnimals(){this.loadAnimals()}loadAnimals(){this.animalService.getAnimals().subscribe(a=>{this.animals=a,this.animals.forEach(s=>{const c=this.calculateTimeDifference(s.birthDate);let p="";c.years>0&&(p+=`${c.years} ${c.years>1?"a\xf1os":"a\xf1o"}, `),c.months>0&&(p+=`${c.months} ${c.months>1?"meses":"mes"}, `),c.days>0&&(p+=`${c.days} ${c.days>1?"d\xedas":"d\xeda"}`),s.timeDifference=p;let u="";u=c.years<1?"male"===s.gender?"#74c495":"#f9dbb1":c.years>=1&&c.years<2?"male"===s.gender?"#46a66d":"#f4ba6a":"male"===s.gender?"#2f704a":"#ef9923",s.colorHeader=u})},a=>{console.error("Error fetching animales:",a),this._snackBar.open("Error al cargar los animales","Cerrar")})}applyFilter(a){console.log(a)}calculateTimeDifference(a){const s=new Date,c=new Date(a),u=(s.getTime()-c.getTime())/864e5,b=u/30;return{years:Math.floor(b/12),months:Math.floor(b%12),days:Math.floor(u%30)}}isLightColor(a){return(299*parseInt(a.substr(1,2),16)+587*parseInt(a.substr(3,2),16)+114*parseInt(a.substr(5,2),16))/1e3>=128}static#t=this.\u0275fac=function(s){return new(s||l)(e.Y36(_t),e.Y36(ot.ux))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-animal-list"]],standalone:!0,features:[e.jDz],decls:3,vars:1,consts:[[3,"filterAnimals"],[1,"animal-list-container"],["class","animal-card",4,"ngFor","ngForOf"],[1,"animal-card"],[1,"animal-name"],[1,"animal-image",3,"src","alt"],[1,"card-content"],[1,"info-row"],[4,"ngIf"]],template:function(s,c){1&s&&(e.TgZ(0,"app-animal-filter-bar",0),e.NdJ("filterAnimals",function(u){return c.applyFilter(u)}),e.qZA(),e.TgZ(1,"div",1),e.YNc(2,Tt,14,14,"mat-card",2),e.qZA()),2&s&&(e.xp6(2),e.Q6J("ngForOf",c.animals))},dependencies:[U.ez,U.sg,U.O5,U.uU,A.QW,A.a8,_.Ps,v.ot,tt],styles:[".header-card[_ngcontent-%COMP%]{width:100%;margin-bottom:5px}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0}.animal-list-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.animal-card[_ngcontent-%COMP%]{width:calc(20% - 20px);height:250px;margin:5px 10px 5px 5px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease-in-out;display:flex;flex-direction:column;position:relative}.animal-name[_ngcontent-%COMP%]{white-space:nowrap;top:0;background:#6ab78a;color:#fff;font-weight:700;width:100%;text-align:center}.animal-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-content[_ngcontent-%COMP%]{padding:5px;display:flex;flex-direction:column}.animal-image[_ngcontent-%COMP%]{height:100px;width:100%;object-fit:cover}.info-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:0}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:auto;padding:5px}button[_ngcontent-%COMP%]{text-transform:uppercase}button[color=primary][_ngcontent-%COMP%]{background-color:#46a66d;color:#fff}button[color=warn][_ngcontent-%COMP%]{background-color:#f4ba6a;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:darken(#46a66d,10%)}@media screen and (max-width: 600px){.animal-card[_ngcontent-%COMP%]{width:calc(50% - 20px)}}"]})}return l})();const Ct=["animalList"];let yt=(()=>{class l{reloadAnimals(){this.animalList.reloadAnimals()}static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-animal-management"]],viewQuery:function(s,c){if(1&s&&e.Gf(Ct,5),2&s){let p;e.iGM(p=e.CRH())&&(c.animalList=p.first)}},standalone:!0,features:[e.jDz],decls:3,vars:0,consts:[[3,"reload"],["animalList",""]],template:function(s,c){1&s&&(e.TgZ(0,"app-animal-header",0),e.NdJ("reload",function(){return c.reloadAnimals()}),e.qZA(),e._UZ(1,"app-animal-list",null,1))},dependencies:[k,St]})}return l})();const Rt=[{path:"ranches",title:"Vacapi - Fincas",component:st},{path:"animals",title:"Vacapi - Animales ",component:yt}];let V=(()=>{class l{static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275mod=e.oAB({type:l});static#n=this.\u0275inj=e.cJS({imports:[U.ez,M.Bz.forChild(Rt),C.O,J.JF,f.u5,f.UX,gt.HT,st,yt]})}return l})()},7271:(wt,rt,g)=>{var mt;!function(M,J,U,C){"use strict";var I,gt=["","webkit","Moz","MS","ms","o"],f=J.createElement("div"),A="function",v=Math.round,_=Math.abs,O=Date.now;function e(t,n,i){return setTimeout(X(t,i),n)}function Y(t,n,i){return!!Array.isArray(t)&&(m(t,i[n],i),!0)}function m(t,n,i){var r;if(t)if(t.forEach)t.forEach(n,i);else if(t.length!==C)for(r=0;r<t.length;)n.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&n.call(i,t[r],r,t)}function w(t,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var o=new Error("get-stack-trace"),h=o&&o.stack?o.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",d=M.console&&(M.console.warn||M.console.log);return d&&d.call(M.console,r,h),t.apply(this,arguments)}}I="function"!=typeof Object.assign?function(n){if(n===C||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),r=1;r<arguments.length;r++){var o=arguments[r];if(o!==C&&null!==o)for(var h in o)o.hasOwnProperty(h)&&(i[h]=o[h])}return i}:Object.assign;var at=w(function(n,i,r){for(var o=Object.keys(i),h=0;h<o.length;)(!r||r&&n[o[h]]===C)&&(n[o[h]]=i[o[h]]),h++;return n},"extend","Use `assign`."),ot=w(function(n,i){return at(n,i,!0)},"merge","Use `assign`.");function y(t,n,i){var o,r=n.prototype;(o=t.prototype=Object.create(r)).constructor=t,o._super=r,i&&I(o,i)}function X(t,n){return function(){return t.apply(n,arguments)}}function Q(t,n){return typeof t==A?t.apply(n&&n[0]||C,n):t}function vt(t,n){return t===C?n:t}function B(t,n,i){m(W(n),function(r){t.addEventListener(r,i,!1)})}function K(t,n,i){m(W(n),function(r){t.removeEventListener(r,i,!1)})}function st(t,n){for(;t;){if(t==n)return!0;t=t.parentNode}return!1}function k(t,n){return t.indexOf(n)>-1}function W(t){return t.trim().split(/\s+/g)}function H(t,n,i){if(t.indexOf&&!i)return t.indexOf(n);for(var r=0;r<t.length;){if(i&&t[r][i]==n||!i&&t[r]===n)return r;r++}return-1}function tt(t){return Array.prototype.slice.call(t,0)}function _t(t,n,i){for(var r=[],o=[],h=0;h<t.length;){var d=n?t[h][n]:t[h];H(o,d)<0&&r.push(t[h]),o[h]=d,h++}return i&&(r=n?r.sort(function(E,P){return E[n]>P[n]}):r.sort()),r}function et(t,n){for(var i,r,o=n[0].toUpperCase()+n.slice(1),h=0;h<gt.length;){if((r=(i=gt[h])?i+o:n)in t)return r;h++}return C}var Zt=1;function Tt(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||M}var Ct="ontouchstart"in M,yt=et(M,"PointerEvent")!==C,Rt=Ct&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V="touch",S="mouse",s=25,c=1,u=4,b=8,nt=1,ct=2,lt=4,ht=8,ut=16,R=ct|lt,$=ht|ut,Wt=R|$,Vt=["x","y"],bt=["clientX","clientY"];function x(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(r){Q(t.options.enable,[t])&&i.handler(r)},this.init()}function pe(t,n,i){var r=i.pointers.length,o=i.changedPointers.length,h=n&c&&r-o==0,d=n&(u|b)&&r-o==0;i.isFirst=!!h,i.isFinal=!!d,h&&(t.session={}),i.eventType=n,function de(t,n){var i=t.session,r=n.pointers,o=r.length;i.firstInput||(i.firstInput=$t(n)),o>1&&!i.firstMultiple?i.firstMultiple=$t(n):1===o&&(i.firstMultiple=!1);var h=i.firstInput,d=i.firstMultiple,T=d?d.center:h.center,E=n.center=jt(r);n.timeStamp=O(),n.deltaTime=n.timeStamp-h.timeStamp,n.angle=Dt(T,E),n.distance=Et(T,E),function fe(t,n){var i=n.center,r=t.offsetDelta||{},o=t.prevDelta||{},h=t.prevInput||{};(n.eventType===c||h.eventType===u)&&(o=t.prevDelta={x:h.deltaX||0,y:h.deltaY||0},r=t.offsetDelta={x:i.x,y:i.y}),n.deltaX=o.x+(i.x-r.x),n.deltaY=o.y+(i.y-r.y)}(i,n),n.offsetDirection=Qt(n.deltaX,n.deltaY);var P=Gt(n.deltaTime,n.deltaX,n.deltaY);n.overallVelocityX=P.x,n.overallVelocityY=P.y,n.overallVelocity=_(P.x)>_(P.y)?P.x:P.y,n.scale=d?function ve(t,n){return Et(n[0],n[1],bt)/Et(t[0],t[1],bt)}(d.pointers,r):1,n.rotation=d?function ge(t,n){return Dt(n[1],n[0],bt)+Dt(t[1],t[0],bt)}(d.pointers,r):0,n.maxPointers=i.prevInput?n.pointers.length>i.prevInput.maxPointers?n.pointers.length:i.prevInput.maxPointers:n.pointers.length,function me(t,n){var o,h,d,T,i=t.lastInterval||n,r=n.timeStamp-i.timeStamp;if(n.eventType!=b&&(r>s||i.velocity===C)){var E=n.deltaX-i.deltaX,P=n.deltaY-i.deltaY,q=Gt(r,E,P);h=q.x,d=q.y,o=_(q.x)>_(q.y)?q.x:q.y,T=Qt(E,P),t.lastInterval=n}else o=i.velocity,h=i.velocityX,d=i.velocityY,T=i.direction;n.velocity=o,n.velocityX=h,n.velocityY=d,n.direction=T}(i,n);var q=t.element;st(n.srcEvent.target,q)&&(q=n.srcEvent.target),n.target=q}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function $t(t){for(var n=[],i=0;i<t.pointers.length;)n[i]={clientX:v(t.pointers[i].clientX),clientY:v(t.pointers[i].clientY)},i++;return{timeStamp:O(),pointers:n,center:jt(n),deltaX:t.deltaX,deltaY:t.deltaY}}function jt(t){var n=t.length;if(1===n)return{x:v(t[0].clientX),y:v(t[0].clientY)};for(var i=0,r=0,o=0;o<n;)i+=t[o].clientX,r+=t[o].clientY,o++;return{x:v(i/n),y:v(r/n)}}function Gt(t,n,i){return{x:n/t||0,y:i/t||0}}function Qt(t,n){return t===n?nt:_(t)>=_(n)?t<0?ct:lt:n<0?ht:ut}function Et(t,n,i){i||(i=Vt);var r=n[i[0]]-t[i[0]],o=n[i[1]]-t[i[1]];return Math.sqrt(r*r+o*o)}function Dt(t,n,i){return i||(i=Vt),180*Math.atan2(n[i[1]]-t[i[1]],n[i[0]]-t[i[0]])/Math.PI}x.prototype={handler:function(){},init:function(){this.evEl&&B(this.element,this.evEl,this.domHandler),this.evTarget&&B(this.target,this.evTarget,this.domHandler),this.evWin&&B(Tt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&K(this.element,this.evEl,this.domHandler),this.evTarget&&K(this.target,this.evTarget,this.domHandler),this.evWin&&K(Tt(this.element),this.evWin,this.domHandler)}};var _e={mousedown:c,mousemove:2,mouseup:u},Te="mousedown",Ce="mousemove mouseup";function Mt(){this.evEl=Te,this.evWin=Ce,this.pressed=!1,x.apply(this,arguments)}y(Mt,x,{handler:function(n){var i=_e[n.type];i&c&&0===n.button&&(this.pressed=!0),2&i&&1!==n.which&&(i=u),this.pressed&&(i&u&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:S,srcEvent:n}))}});var ye={pointerdown:c,pointermove:2,pointerup:u,pointercancel:b,pointerout:b},be={2:V,3:"pen",4:S,5:"kinect"},Bt="pointerdown",Kt="pointermove pointerup pointercancel";function qt(){this.evEl=Bt,this.evWin=Kt,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}M.MSPointerEvent&&!M.PointerEvent&&(Bt="MSPointerDown",Kt="MSPointerMove MSPointerUp MSPointerCancel"),y(qt,x,{handler:function(n){var i=this.store,r=!1,o=n.type.toLowerCase().replace("ms",""),h=ye[o],d=be[n.pointerType]||n.pointerType,T=d==V,E=H(i,n.pointerId,"pointerId");h&c&&(0===n.button||T)?E<0&&(i.push(n),E=i.length-1):h&(u|b)&&(r=!0),!(E<0)&&(i[E]=n,this.callback(this.manager,h,{pointers:i,changedPointers:[n],pointerType:d,srcEvent:n}),r&&i.splice(E,1))}});var Ee={touchstart:c,touchmove:2,touchend:u,touchcancel:b};function te(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,x.apply(this,arguments)}function Pe(t,n){var i=tt(t.touches),r=tt(t.changedTouches);return n&(u|b)&&(i=_t(i.concat(r),"identifier",!0)),[i,r]}y(te,x,{handler:function(n){var i=Ee[n.type];if(i===c&&(this.started=!0),this.started){var r=Pe.call(this,n,i);i&(u|b)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:r[0],changedPointers:r[1],pointerType:V,srcEvent:n})}}});var Ae={touchstart:c,touchmove:2,touchend:u,touchcancel:b},Ie="touchstart touchmove touchend touchcancel";function Ot(){this.evTarget=Ie,this.targetIds={},x.apply(this,arguments)}function xe(t,n){var i=tt(t.touches),r=this.targetIds;if(n&(2|c)&&1===i.length)return r[i[0].identifier]=!0,[i,i];var o,h,d=tt(t.changedTouches),T=[],E=this.target;if(h=i.filter(function(P){return st(P.target,E)}),n===c)for(o=0;o<h.length;)r[h[o].identifier]=!0,o++;for(o=0;o<d.length;)r[d[o].identifier]&&T.push(d[o]),n&(u|b)&&delete r[d[o].identifier],o++;return T.length?[_t(h.concat(T),"identifier",!0),T]:void 0}y(Ot,x,{handler:function(n){var i=Ae[n.type],r=xe.call(this,n,i);r&&this.callback(this.manager,i,{pointers:r[0],changedPointers:r[1],pointerType:V,srcEvent:n})}});var Ne=2500;function kt(){x.apply(this,arguments);var t=X(this.handler,this);this.touch=new Ot(this.manager,t),this.mouse=new Mt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function we(t,n){t&c?(this.primaryTouch=n.changedPointers[0].identifier,ne.call(this,n)):t&(u|b)&&ne.call(this,n)}function ne(t){var n=t.changedPointers[0];if(n.identifier===this.primaryTouch){var i={x:n.clientX,y:n.clientY};this.lastTouches.push(i);var r=this.lastTouches;setTimeout(function(){var h=r.indexOf(i);h>-1&&r.splice(h,1)},Ne)}}function Ze(t){for(var n=t.srcEvent.clientX,i=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],h=Math.abs(n-o.x),d=Math.abs(i-o.y);if(h<=25&&d<=25)return!0}return!1}y(kt,x,{handler:function(n,i,r){var h=r.pointerType==S;if(!(h&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(r.pointerType==V)we.call(this,i,r);else if(h&&Ze.call(this,r))return;this.callback(n,i,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ie=et(f.style,"touchAction"),re=ie!==C,ae="compute",Ft="manipulation",j="none",pt="pan-x",dt="pan-y",Pt=function Se(){if(!re)return!1;var t={},n=M.CSS&&M.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!n||M.CSS.supports("touch-action",i)}),t}();function Lt(t,n){this.manager=t,this.set(n)}Lt.prototype={set:function(t){t==ae&&(t=this.compute()),re&&this.manager.element.style&&Pt[t]&&(this.manager.element.style[ie]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,function(n){Q(n.options.enable,[n])&&(t=t.concat(n.getTouchAction()))}),function Ue(t){if(k(t,j))return j;var n=k(t,pt),i=k(t,dt);return n&&i?j:n||i?n?pt:dt:k(t,Ft)?Ft:"auto"}(t.join(" "))},preventDefaults:function(t){var n=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,o=k(r,j)&&!Pt[j],h=k(r,dt)&&!Pt[dt],d=k(r,pt)&&!Pt[pt];if(o&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;return d&&h||!(o||h&&i&R||d&&i&$)?void 0:this.preventSrc(n)}n.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var At=1,D=32;function L(t){this.options=I({},this.defaults,t||{}),this.id=function Ut(){return Zt++}(),this.manager=null,this.options.enable=vt(this.options.enable,!0),this.state=At,this.simultaneous={},this.requireFail=[]}function se(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function ce(t){return t==ut?"down":t==ht?"up":t==ct?"left":t==lt?"right":""}function It(t,n){var i=n.manager;return i?i.get(t):t}function Z(){L.apply(this,arguments)}function xt(){Z.apply(this,arguments),this.pX=null,this.pY=null}function Yt(){Z.apply(this,arguments)}function Ht(){L.apply(this,arguments),this._timer=null,this._input=null}function zt(){Z.apply(this,arguments)}function Jt(){Z.apply(this,arguments)}function Nt(){L.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function G(t,n){return(n=n||{}).recognizers=vt(n.recognizers,G.defaults.preset),new Xt(t,n)}function Xt(t,n){this.options=I({},G.defaults,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function ue(t){return new(t.options.inputClass||(yt?qt:Rt?Ot:Ct?kt:Mt))(t,pe)}(this),this.touchAction=new Lt(this,this.options.touchAction),he(this,!0),m(this.options.recognizers,function(i){var r=this.add(new i[0](i[1]));i[2]&&r.recognizeWith(i[2]),i[3]&&r.requireFailure(i[3])},this)}function he(t,n){var r,i=t.element;i.style&&(m(t.options.cssProps,function(o,h){r=et(i.style,h),n?(t.oldCssProps[r]=i.style[r],i.style[r]=o):i.style[r]=t.oldCssProps[r]||""}),n||(t.oldCssProps={}))}L.prototype={defaults:{},set:function(t){return I(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(Y(t,"recognizeWith",this))return this;var n=this.simultaneous;return n[(t=It(t,this)).id]||(n[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return Y(t,"dropRecognizeWith",this)||(t=It(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(Y(t,"requireFailure",this))return this;var n=this.requireFail;return-1===H(n,t=It(t,this))&&(n.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(Y(t,"dropRequireFailure",this))return this;t=It(t,this);var n=H(this.requireFail,t);return n>-1&&this.requireFail.splice(n,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var n=this,i=this.state;function r(o){n.manager.emit(o,t)}i<8&&r(n.options.event+se(i)),r(n.options.event),t.additionalEvent&&r(t.additionalEvent),i>=8&&r(n.options.event+se(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=D},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(D|At)))return!1;t++}return!0},recognize:function(t){var n=I({},t);if(!Q(this.options.enable,[this,n]))return this.reset(),void(this.state=D);56&this.state&&(this.state=At),this.state=this.process(n),30&this.state&&this.tryEmit(n)},process:function(t){},getTouchAction:function(){},reset:function(){}},y(Z,L,{defaults:{pointers:1},attrTest:function(t){var n=this.options.pointers;return 0===n||t.pointers.length===n},process:function(t){var n=this.state,i=t.eventType,r=6&n,o=this.attrTest(t);return r&&(i&b||!o)?16|n:r||o?i&u?8|n:2&n?4|n:2:D}}),y(xt,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Wt},getTouchAction:function(){var t=this.options.direction,n=[];return t&R&&n.push(dt),t&$&&n.push(pt),n},directionTest:function(t){var n=this.options,i=!0,r=t.distance,o=t.direction,h=t.deltaX,d=t.deltaY;return o&n.direction||(n.direction&R?(o=0===h?nt:h<0?ct:lt,i=h!=this.pX,r=Math.abs(t.deltaX)):(o=0===d?nt:d<0?ht:ut,i=d!=this.pY,r=Math.abs(t.deltaY))),t.direction=o,i&&r>n.threshold&&o&n.direction},attrTest:function(t){return Z.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var n=ce(t.direction);n&&(t.additionalEvent=this.options.event+n),this._super.emit.call(this,t)}}),y(Yt,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[j]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),y(Ht,L,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!r||!i||t.eventType&(u|b)&&!o)this.reset();else if(t.eventType&c)this.reset(),this._timer=e(function(){this.state=8,this.tryEmit()},n.time,this);else if(t.eventType&u)return 8;return D},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&u?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=O(),this.manager.emit(this.options.event,this._input)))}}),y(zt,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[j]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),y(Jt,Z,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:R|$,pointers:1},getTouchAction:function(){return xt.prototype.getTouchAction.call(this)},attrTest:function(t){var i,n=this.options.direction;return n&(R|$)?i=t.overallVelocity:n&R?i=t.overallVelocityX:n&$&&(i=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_(i)>this.options.velocity&&t.eventType&u},emit:function(t){var n=ce(t.offsetDirection);n&&this.manager.emit(this.options.event+n,t),this.manager.emit(this.options.event,t)}}),y(Nt,L,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ft]},process:function(t){var n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),t.eventType&c&&0===this.count)return this.failTimeout();if(r&&o&&i){if(t.eventType!=u)return this.failTimeout();var h=!this.pTime||t.timeStamp-this.pTime<n.interval,d=!this.pCenter||Et(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,d&&h?this.count+=1:this.count=1,this._input=t,0==this.count%n.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=8,this.tryEmit()},n.interval,this),2):8}return D},failTimeout:function(){return this._timer=e(function(){this.state=D},this.options.interval,this),D},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),G.VERSION="2.0.7",G.defaults={domEvents:!1,touchAction:ae,enable:!0,inputTarget:null,inputClass:null,preset:[[zt,{enable:!1}],[Yt,{enable:!1},["rotate"]],[Jt,{direction:R}],[xt,{direction:R},["swipe"]],[Nt],[Nt,{event:"doubletap",taps:2},["tap"]],[Ht]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Xt.prototype={set:function(t){return I(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(t);var i,r=this.recognizers,o=n.curRecognizer;(!o||o&&8&o.state)&&(o=n.curRecognizer=null);for(var h=0;h<r.length;)i=r[h],2===n.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&14&i.state&&(o=n.curRecognizer=i),h++}},get:function(t){if(t instanceof L)return t;for(var n=this.recognizers,i=0;i<n.length;i++)if(n[i].options.event==t)return n[i];return null},add:function(t){if(Y(t,"add",this))return this;var n=this.get(t.options.event);return n&&this.remove(n),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(Y(t,"remove",this))return this;if(t=this.get(t)){var n=this.recognizers,i=H(n,t);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},on:function(t,n){if(t!==C&&n!==C){var i=this.handlers;return m(W(t),function(r){i[r]=i[r]||[],i[r].push(n)}),this}},off:function(t,n){if(t!==C){var i=this.handlers;return m(W(t),function(r){n?i[r]&&i[r].splice(H(i[r],n),1):delete i[r]}),this}},emit:function(t,n){this.options.domEvents&&function De(t,n){var i=J.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}(t,n);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){n.type=t,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](n),r++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},I(G,{INPUT_START:c,INPUT_MOVE:2,INPUT_END:u,INPUT_CANCEL:b,STATE_POSSIBLE:At,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:D,DIRECTION_NONE:nt,DIRECTION_LEFT:ct,DIRECTION_RIGHT:lt,DIRECTION_UP:ht,DIRECTION_DOWN:ut,DIRECTION_HORIZONTAL:R,DIRECTION_VERTICAL:$,DIRECTION_ALL:Wt,Manager:Xt,Input:x,TouchAction:Lt,TouchInput:Ot,MouseInput:Mt,PointerEventInput:qt,TouchMouseInput:kt,SingleTouchInput:te,Recognizer:L,AttrRecognizer:Z,Tap:Nt,Pan:xt,Swipe:Jt,Pinch:Yt,Rotate:zt,Press:Ht,on:B,off:K,each:m,merge:ot,extend:at,assign:I,inherit:y,bindFn:X,prefixed:et}),(typeof M<"u"?M:typeof self<"u"?self:{}).Hammer=G,(mt=function(){return G}.call(rt,g,rt,wt))!==C&&(wt.exports=mt)}(window,document)}}]);